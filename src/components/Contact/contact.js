import React, {useState} from "react";
import emailjs from 'emailjs-com'

const initialState = {
    name: '',
    email: '',
    message: '',
}
export const Contact = (props) => {
    const [{name, email, message}, setState] = useState(initialState)

    const handleChange = (e) => {
        const {name, value} = e.target
        setState((prevState) => ({...prevState, [name]: value}))
    }
    const clearState = () => {
        document.getElementById("contact-form").reset();
    }

    const handleSubmit = (e) => {
        e.preventDefault()
        console.log(name, email, message)
        emailjs
            .sendForm(
                'service_seshdt8', 'template_j4lvwzd', e.target, 'user_OmQVMukt3ZYQR3UaMx9ex'
            )
            .then(
                (result) => {
                    console.log(result.text)
                    clearState()
                },
                (error) => {
                    console.log(error.text)
                }
            )
    }
    return (
        <div>
            <div id='contact'>
                <div className='col-md-8'>
                    <form name='sentMessage' onSubmit={handleSubmit} id="contact-form">
                        <div className='row'>
                            <div className='col-md-6'>
                                <div className='form-group'>
                                    <input
                                        type='text'
                                        id='name'
                                        name='name'
                                        className='form-control'
                                        placeholder='Name'
                                        required
                                        onChange={handleChange}
                                    />
                                    <p className='help-block text-danger'></p>
                                </div>
                            </div>
                            <div className='col-md-6'>
                                <div className='form-group'>
                                    <input
                                        type='email'
                                        id='email'
                                        name='email'
                                        className='form-control'
                                        placeholder='Email'
                                        required
                                        onChange={handleChange}
                                    />
                                    <p className='help-block text-danger'></p>
                                </div>
                            </div>
                        </div>
                        <div className='form-group'>
                  <textarea
                      name='message'
                      id='message'
                      className='form-control'
                      rows='4'
                      placeholder='Message'
                      required
                      onChange={handleChange}
                  ></textarea>
                            <p className='help-block text-danger'></p>
                        </div>
                        <div id='success'></div>
                        <button type='submit' className='btn btn-custom btn-lg'>
                            Enviar Mensaje
                        </button>
                    </form>
                </div>
            </div>
        </div>
    )
}
